assets:
  # 从 git clone revision 版本到 path
  - git: https://github.com/King-Of-Knights/openwrt-6.x
    path: openwrt
    revision: main
  # 从 url 下载文件到 path 路径
  # - url: ''
  #   path: ''
  # 从 link 创建软链接到 path
  # - link: cache/ccache
  #   path: openwrt/.ccache
  - link: staging_dir
    path: openwrt/staging_dir
  - link: build_dir
    path: openwrt/build_dir
# 渐进式编译
# 从简单的配置开始编译，逐渐添加内容
steps:
  # - include:
  #   - device/qualcommax-ipq60xx-glinet_gl-axt1800
  #   - patch
  - include:
    - device/qualcommax-ipq60xx-glinet_gl-axt1800
    # - patch
    - devel
    - kexec
    - kernel
    # - app/collectd
    # - app/cpufreq
    # - app/luci
    # - app/openclash
    # - app/samba
    # - app/zerotier
    # - custom
    # - rootfs
    - utils
    - mmc
packages:
  - luci-ssl-nginx
  - luci-app-upnp
#   # for shellclash
#   - kmod-nft-tproxy
modules:
  - nginx-full
  - nginx-mod-dav-ext
  - nginx-mod-headers-more
diffconfig: |
  CONFIG_LUCI_LANG_zh_Hans=y

  # nginx
  CONFIG_NGINX_DAV=y
  CONFIG_NGINX_HTTP_ACCESS=y
  CONFIG_NGINX_HTTP_AUTH_BASIC=y
  CONFIG_NGINX_HTTP_AUTOINDEX=y
  CONFIG_NGINX_HTTP_CACHE=y
  CONFIG_NGINX_HTTP_GZIP=y
  CONFIG_NGINX_HTTP_MAP=y
  CONFIG_NGINX_HTTP_REWRITE=y
  CONFIG_NGINX_HTTP_PROXY=y
  # CONFIG_NGINX_HTTP_UWSGI=y
  CONFIG_NGINX_HTTP_V2=y
  CONFIG_NGINX_PCRE=y
  # CONFIG_NGINX_FLV is not set
  # CONFIG_NGINX_HTTP_CHARSET is not set
  # CONFIG_NGINX_HTTP_SSI is not set
  # CONFIG_NGINX_HTTP_USERID is not set
  # CONFIG_NGINX_HTTP_GEO is not set
  # CONFIG_NGINX_HTTP_SPLIT_CLIENTS is not set
  # CONFIG_NGINX_HTTP_REFERER is not set
  # CONFIG_NGINX_HTTP_FASTCGI is not set
  # CONFIG_NGINX_HTTP_SCGI is not set
  # CONFIG_NGINX_HTTP_MEMCACHED is not set
  # CONFIG_NGINX_HTTP_LIMIT_CONN is not set
  # CONFIG_NGINX_HTTP_LIMIT_REQ is not set
  # CONFIG_NGINX_HTTP_EMPTY_GIF is not set
  # CONFIG_NGINX_HTTP_BROWSER is not set
  # CONFIG_NGINX_HTTP_REAL_IP is not set
  # CONFIG_NGINX_HTTP_SECURE_LINK is not set
  CONFIG_NGINX_HTTP_SUB=y
  # CONFIG_NGINX_STUB_STATUS is not set
# patch:
#   '.':
#     - ../common/JiaY-shi/patches/*.patch
#     # - 'patches/default-enable-wifi.patch'
#     # - 'patches/kexec-for-aarch64.patch'
